---
title: "Knowledge base"
description: "Manage documents, attach them to genies, and sync content across agents"
---

The knowledge base stores documents that genies reference during conversations. Documents can be created from PDFs, websites, YouTube videos, or plain text. Each document is stored both in the HelpGenie database and in ElevenLabs.

<Note>
  Standard users can only access their own documents. Admin users can access all documents and filter by owner when passing `adminMode: true`.
</Note>

---

## List all documents

Retrieves all documents with pagination, filtering, and role-based access control. Returns documents along with their dependent agents.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"all"`
</ParamField>

<ParamField body="data" type="object">
  <Expandable title="properties">
    <ParamField body="limit" type="number" default="50">
      Results per page. Maximum 200.
    </ParamField>
    <ParamField body="offset" type="number" default="0">
      Number of results to skip.
    </ParamField>
    <ParamField body="filters" type="object">
      <Expandable title="properties">
        <ParamField body="searchTerm" type="string">
          Filter by document name (case-insensitive).
        </ParamField>
        <ParamField body="selectedPrivacy" type="string">
          Filter by visibility: `"public"` or `"private"`.
        </ParamField>
        <ParamField body="selectedType" type="string">
          Filter by document source type (for example `"pdf_upload"`, `"website"`, `"youtube"`).
        </ParamField>
        <ParamField body="folderId" type="string">
          Filter by folder ID. Pass `null` for uncategorized documents.
        </ParamField>
        <ParamField body="selectedUsername" type="string">
          Admin only. Filter by owner name.
        </ParamField>
      </Expandable>
    </ParamField>
    <ParamField body="includeOwner" type="boolean" default="false">
      Admin only. Include owner profile data in each document.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="documents" type="array">
      <Expandable title="item properties">
        <ResponseField name="id" type="string">Document UUID.</ResponseField>
        <ResponseField name="name" type="string">Document name.</ResponseField>
        <ResponseField name="url" type="string">Source URL or storage URL.</ResponseField>
        <ResponseField name="is_active" type="boolean">Whether the document is active.</ResponseField>
        <ResponseField name="is_public" type="boolean">Whether the document is publicly visible.</ResponseField>
        <ResponseField name="el_doc_id" type="string">ElevenLabs document identifier.</ResponseField>
        <ResponseField name="user_id" type="string">Owner user ID.</ResponseField>
        <ResponseField name="folder_id" type="string | null">Folder ID, or `null` if uncategorized.</ResponseField>
        <ResponseField name="metadata" type="object">
          <Expandable title="properties">
            <ResponseField name="pdf_size" type="number">File size in bytes.</ResponseField>
            <ResponseField name="type" type="string">Document type (for example `"pdf_upload"`).</ResponseField>
            <ResponseField name="total_pages" type="number">Number of pages (PDFs only).</ResponseField>
            <ResponseField name="source" type="string">Source type.</ResponseField>
          </Expandable>
        </ResponseField>
        <ResponseField name="created_at" type="string">ISO 8601 creation timestamp.</ResponseField>
        <ResponseField name="updated_at" type="string">ISO 8601 last-updated timestamp.</ResponseField>
        <ResponseField name="folder" type="object | null">Folder details, if assigned.</ResponseField>
        <ResponseField name="owner" type="object | null">Owner profile (admin mode only).</ResponseField>
        <ResponseField name="dependent_agents" type="array">
          Genies that use this document.
          <Expandable title="item properties">
            <ResponseField name="id" type="string">Genie ID.</ResponseField>
            <ResponseField name="elevenlabs_id" type="string">ElevenLabs agent ID.</ResponseField>
            <ResponseField name="name" type="string">Genie name.</ResponseField>
            <ResponseField name="category" type="string">Genie category.</ResponseField>
            <ResponseField name="is_active" type="boolean">Whether the genie is active.</ResponseField>
          </Expandable>
        </ResponseField>
      </Expandable>
    </ResponseField>
    <ResponseField name="count" type="number">Total matching documents.</ResponseField>
    <ResponseField name="limit" type="number">Applied limit.</ResponseField>
    <ResponseField name="offset" type="number">Applied offset.</ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke("documents", "all", undefined, {
  limit: 50,
  offset: 0,
  filters: {
    searchTerm: "product",
    selectedPrivacy: "public",
    selectedType: "pdf_upload",
  },
});
```

```json Request body
{
  "resource": "documents",
  "action": "all",
  "data": {
    "limit": 50,
    "offset": 0,
    "filters": {
      "searchTerm": "product",
      "selectedPrivacy": "public",
      "selectedType": "pdf_upload"
    }
  }
}
```

```json Response
{
  "success": true,
  "data": {
    "documents": [
      {
        "id": "770e8400-e29b-41d4-a716-446655440002",
        "name": "Product Documentation",
        "url": "https://storage.example.com/documents/product-docs.pdf",
        "is_active": true,
        "is_public": true,
        "el_doc_id": "el-doc-123",
        "user_id": "660e8400-e29b-41d4-a716-446655440001",
        "folder_id": null,
        "metadata": {
          "pdf_size": 2048576,
          "type": "pdf_upload",
          "total_pages": 45,
          "source": "pdf_upload"
        },
        "created_at": "2024-01-15T10:30:00.000Z",
        "updated_at": "2024-01-15T10:30:00.000Z",
        "folder": null,
        "owner": null,
        "dependent_agents": [
          {
            "id": "880e8400-e29b-41d4-a716-446655440003",
            "elevenlabs_id": "el-agent-456",
            "name": "Customer Support",
            "category": "support",
            "is_active": true
          }
        ]
      }
    ],
    "count": 125,
    "limit": 50,
    "offset": 0
  }
}
```
</CodeGroup>

---

## Get document

Retrieves a single document by its UUID or 20-character ElevenLabs document ID. Returns full details including metadata, folder info, and dependent agents.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"get"`
</ParamField>

<ParamField body="id" type="string" required>
  The document UUID or ElevenLabs document ID (`el_doc_id`).
</ParamField>

<ParamField body="data" type="object">
  <Expandable title="properties">
    <ParamField body="adminMode" type="boolean" default="false">
      Admin only. Include owner profile information.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="document" type="object">
      Full document object including `id`, `name`, `url`, `is_active`, `is_public`, `el_doc_id`, `user_id`, `folder_id`, `metadata`, `folder`, `owner`, `dependent_agents`, `created_at`, and `updated_at`.
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke(
  "documents",
  "get",
  "770e8400-e29b-41d4-a716-446655440002"
);
```

```json Request body
{
  "resource": "documents",
  "action": "get",
  "id": "770e8400-e29b-41d4-a716-446655440002"
}
```

```json Response
{
  "success": true,
  "data": {
    "document": {
      "id": "770e8400-e29b-41d4-a716-446655440002",
      "name": "Product Documentation",
      "url": "https://storage.example.com/documents/product-docs.pdf",
      "is_active": true,
      "is_public": true,
      "el_doc_id": "el-doc-123",
      "user_id": "660e8400-e29b-41d4-a716-446655440001",
      "folder_id": "550e8400-e29b-41d4-a716-446655440000",
      "metadata": {
        "pdf_size": 2048576,
        "type": "pdf_upload",
        "total_pages": 45,
        "source": "pdf_upload"
      },
      "created_at": "2024-01-15T10:30:00.000Z",
      "updated_at": "2024-01-15T10:30:00.000Z",
      "folder": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "Documentation",
        "color": "#FF5733",
        "icon": "folder",
        "position": 0
      },
      "owner": null,
      "dependent_agents": [
        {
          "id": "880e8400-e29b-41d4-a716-446655440003",
          "elevenlabs_id": "el-agent-456",
          "name": "Customer Support",
          "category": "support",
          "is_active": true
        }
      ]
    }
  }
}
```
</CodeGroup>

<Note>
  Non-admin users can only access their own documents or documents marked as public. Admin users with `adminMode: true` can access all documents and see owner information.
</Note>

---

## Create document

Creates a new document by delegating to the document upload pipeline. Supports multiple content sources: PDFs, websites, YouTube videos, and text.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"create"`
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="action" type="string" required>
      The upload sub-action. One of:
      - `"upload-website"` -- Extract content from a URL
      - `"scrape-website"` -- Scrape and parse website content
      - `"extract-youtube"` -- Extract transcript from a YouTube video
      - `"upload-pdf"` -- Upload and process a PDF file
      - `"extract-document"` -- Extract content from various document formats
    </ParamField>
    <ParamField body="data" type="object" required>
      Sub-action-specific parameters. For `upload-website`, pass `{ "url": "https://..." }`.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="document" type="object">
      <Expandable title="properties">
        <ResponseField name="id" type="string">New document ID.</ResponseField>
        <ResponseField name="el_doc_id" type="string">ElevenLabs document ID.</ResponseField>
        <ResponseField name="name" type="string">Extracted document name.</ResponseField>
        <ResponseField name="metadata" type="object">Source metadata.</ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke("documents", "create", undefined, {
  action: "upload-website",
  data: {
    url: "https://example.com/documentation",
  },
});
```

```json Request body
{
  "resource": "documents",
  "action": "create",
  "data": {
    "action": "upload-website",
    "data": {
      "url": "https://example.com/documentation"
    }
  }
}
```

```json Response
{
  "success": true,
  "data": {
    "document": {
      "id": "doc-new-id",
      "el_doc_id": "el-doc-123",
      "name": "Extracted Document",
      "metadata": {
        "source": "website",
        "url": "https://example.com/documentation"
      }
    }
  }
}
```
</CodeGroup>

---

## Update document (data mode)

Updates document metadata fields without changing the content. Only the fields you provide are updated. Metadata is intelligently merged with existing values.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"update"`
</ParamField>

<ParamField body="id" type="string" required>
  The document UUID to update.
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="mode" type="string" required>
      Must be `"data"`.
    </ParamField>
    <ParamField body="name" type="string">
      New document name. If an ElevenLabs document exists, it will be renamed there as well.
    </ParamField>
    <ParamField body="is_active" type="boolean">
      Active status.
    </ParamField>
    <ParamField body="is_public" type="boolean">
      Public visibility.
    </ParamField>
    <ParamField body="folder_id" type="string | null">
      Folder ID for organization. Pass `null` to remove from any folder.
    </ParamField>
    <ParamField body="is_personal" type="boolean">
      Personal document flag.
    </ParamField>
    <ParamField body="metadata" type="object">
      Custom metadata key-value pairs. Merged with existing metadata.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="document" type="object">
      The updated document object with all current field values.
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke(
  "documents",
  "update",
  "770e8400-e29b-41d4-a716-446655440002",
  {
    mode: "data",
    name: "Updated Product Documentation",
    is_active: true,
    is_public: false,
    folder_id: "550e8400-e29b-41d4-a716-446655440000",
  }
);
```

```json Request body
{
  "resource": "documents",
  "action": "update",
  "id": "770e8400-e29b-41d4-a716-446655440002",
  "data": {
    "mode": "data",
    "name": "Updated Product Documentation",
    "is_active": true,
    "is_public": false,
    "folder_id": "550e8400-e29b-41d4-a716-446655440000"
  }
}
```

```json Response
{
  "success": true,
  "data": {
    "document": {
      "id": "770e8400-e29b-41d4-a716-446655440002",
      "name": "Updated Product Documentation",
      "is_active": true,
      "is_public": false,
      "folder_id": "550e8400-e29b-41d4-a716-446655440000",
      "metadata": {
        "pdf_size": 2048576,
        "type": "pdf_upload",
        "total_pages": 45,
        "source": "pdf_upload"
      },
      "updated_at": "2024-01-15T11:00:00.000Z"
    }
  }
}
```
</CodeGroup>

---

## Update document (content mode)

Replaces the document content in ElevenLabs. The old ElevenLabs document is deleted and a new one is created. All dependent agents are automatically updated with the new content.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"update"`
</ParamField>

<ParamField body="id" type="string" required>
  The document UUID to update.
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="mode" type="string" required>
      Must be `"content"`.
    </ParamField>
    <ParamField body="content" type="string" required>
      The new document content (non-empty string).
    </ParamField>
    <ParamField body="isOptimized" type="boolean" default="false">
      Flag indicating whether the content has been optimized or manually edited.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="document" type="object">
      Updated document with the new `el_doc_id` and storage metadata.
    </ResponseField>
    <ResponseField name="contentType" type="string">
      Either `"edited"` or `"optimized"`.
    </ResponseField>
    <ResponseField name="storagePath" type="string">
      Path to the stored content file.
    </ResponseField>
    <ResponseField name="signedUrl" type="string">
      Signed URL for accessing the content (valid for 7 days).
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke(
  "documents",
  "update",
  "770e8400-e29b-41d4-a716-446655440002",
  {
    mode: "content",
    content: "Updated document content with revised product information...",
    isOptimized: false,
  }
);
```

```json Request body
{
  "resource": "documents",
  "action": "update",
  "id": "770e8400-e29b-41d4-a716-446655440002",
  "data": {
    "mode": "content",
    "content": "Updated document content with revised product information...",
    "isOptimized": false
  }
}
```

```json Response
{
  "success": true,
  "data": {
    "document": {
      "id": "770e8400-e29b-41d4-a716-446655440002",
      "el_doc_id": "el-doc-new-id",
      "name": "Product Documentation",
      "metadata": {
        "pdf_size": 2048576,
        "type": "pdf_upload",
        "source": "pdf_upload",
        "edited_url": "https://signed.url/documents/edited/product_documentation_edited.txt?expires=..."
      },
      "updated_at": "2024-01-15T11:30:00.000Z"
    },
    "contentType": "edited",
    "storagePath": "documents/edited/product_documentation_edited.txt",
    "signedUrl": "https://signed.url/documents/edited/product_documentation_edited.txt?expires=..."
  }
}
```
</CodeGroup>

<Note>
  Content mode deletes the old ElevenLabs document and creates a new one. All genies that depend on this document are automatically updated with the new ElevenLabs document ID.
</Note>

---

## Delete document

Permanently deletes a document, removes it from storage and ElevenLabs, and syncs the removal with all dependent agents.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"delete"`
</ParamField>

<ParamField body="id" type="string" required>
  The document UUID to delete.
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="message" type="string">Confirmation message.</ResponseField>
  </Expandable>
</ResponseField>

<Warning>
  This action is irreversible. The document, its storage file, and its ElevenLabs record will be permanently removed. All dependent genies will have the document removed from their knowledge base.
</Warning>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke(
  "documents",
  "delete",
  "770e8400-e29b-41d4-a716-446655440002"
);
```

```json Request body
{
  "resource": "documents",
  "action": "delete",
  "id": "770e8400-e29b-41d4-a716-446655440002"
}
```

```json Response
{
  "success": true,
  "data": {
    "message": "Document deleted successfully"
  }
}
```
</CodeGroup>

---

## Attach documents to agent

Adds one or more documents to a genie's knowledge base. Duplicate documents are automatically skipped.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"attach"`
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="agentId" type="string" required>
      The genie ID to attach documents to.
    </ParamField>
    <ParamField body="documents" type="array" required>
      Array of documents to attach.
      <Expandable title="item properties">
        <ParamField body="id" type="string" required>Document ID.</ParamField>
        <ParamField body="name" type="string" required>Document name.</ParamField>
        <ParamField body="type" type="string" required>Document type (for example `"file"`, `"url"`).</ParamField>
      </Expandable>
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="message" type="string">
  Summary of attached documents.
</ResponseField>

<ResponseField name="attachedCount" type="number">
  Number of documents successfully attached.
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke("documents", "attach", undefined, {
  agentId: "550e8400-e29b-41d4-a716-446655440000",
  documents: [
    { id: "doc-id-1", name: "Product FAQ", type: "file" },
    { id: "doc-id-2", name: "Pricing Guide", type: "url" },
  ],
});
```

```json Request body
{
  "resource": "documents",
  "action": "attach",
  "data": {
    "agentId": "550e8400-e29b-41d4-a716-446655440000",
    "documents": [
      { "id": "doc-id-1", "name": "Product FAQ", "type": "file" },
      { "id": "doc-id-2", "name": "Pricing Guide", "type": "url" }
    ]
  }
}
```

```json Response
{
  "success": true,
  "message": "Attached 2 documents",
  "attachedCount": 2
}
```
</CodeGroup>

---

## Detach documents from agent

Removes specific documents from a genie's knowledge base.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"detach"`
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="agentId" type="string" required>
      The genie ID to detach documents from.
    </ParamField>
    <ParamField body="documentIds" type="string[]" required>
      Array of document IDs to remove.
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="message" type="string">
  Summary of detached documents.
</ResponseField>

<ResponseField name="detachedCount" type="number">
  Number of documents successfully detached.
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke("documents", "detach", undefined, {
  agentId: "550e8400-e29b-41d4-a716-446655440000",
  documentIds: ["doc-id-1", "doc-id-2"],
});
```

```json Request body
{
  "resource": "documents",
  "action": "detach",
  "data": {
    "agentId": "550e8400-e29b-41d4-a716-446655440000",
    "documentIds": ["doc-id-1", "doc-id-2"]
  }
}
```

```json Response
{
  "success": true,
  "message": "Detached 2 documents",
  "detachedCount": 2
}
```
</CodeGroup>

---

## Replace agent knowledge base

Completely replaces a genie's knowledge base with a new set of documents. Documents not in the new list are removed; new documents are added.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"replace"`
</ParamField>

<ParamField body="data" type="object" required>
  <Expandable title="properties">
    <ParamField body="agentId" type="string" required>
      The genie ID whose knowledge base will be replaced.
    </ParamField>
    <ParamField body="documents" type="array" required>
      The new complete set of documents.
      <Expandable title="item properties">
        <ParamField body="id" type="string" required>Document ID.</ParamField>
        <ParamField body="name" type="string" required>Document name.</ParamField>
        <ParamField body="type" type="string" required>Document type (for example `"file"`, `"url"`).</ParamField>
      </Expandable>
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="message" type="string">
  Summary of replaced documents.
</ResponseField>

<ResponseField name="replacedCount" type="number">
  Number of documents in the new knowledge base.
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke("documents", "replace", undefined, {
  agentId: "550e8400-e29b-41d4-a716-446655440000",
  documents: [
    { id: "doc-id-1", name: "Product FAQ", type: "file" },
    { id: "doc-id-3", name: "Return Policy", type: "file" },
  ],
});
```

```json Request body
{
  "resource": "documents",
  "action": "replace",
  "data": {
    "agentId": "550e8400-e29b-41d4-a716-446655440000",
    "documents": [
      { "id": "doc-id-1", "name": "Product FAQ", "type": "file" },
      { "id": "doc-id-3", "name": "Return Policy", "type": "file" }
    ]
  }
}
```

```json Response
{
  "success": true,
  "message": "Replaced knowledge base with 2 documents",
  "replacedCount": 2
}
```
</CodeGroup>

---

## Sync documents with agents

Synchronizes document changes across all dependent agents. Removes old ElevenLabs documents and adds updated ones to each agent's knowledge base. Typically used internally after document content is updated or deleted.

<ParamField body="resource" type="string" required>
  Must be `"documents"`
</ParamField>

<ParamField body="action" type="string" required>
  Must be `"sync-with-agent"`
</ParamField>

<ParamField body="data" type="object">
  <Expandable title="properties">
    <ParamField body="oldDocId" type="string">
      ElevenLabs document ID to remove from agents.
    </ParamField>
    <ParamField body="newDocId" type="string">
      ElevenLabs document ID to add to agents.
    </ParamField>
    <ParamField body="documentIds" type="string[]">
      Specific document IDs to sync. If omitted, syncs all dependent documents.
    </ParamField>
    <ParamField body="preventDeletion" type="boolean" default="false">
      When `true`, skip deletion of the old document from agents (non-destructive update).
    </ParamField>
  </Expandable>
</ParamField>

<ResponseField name="success" type="boolean">
  Whether the request succeeded.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="synced_agents" type="array">
      Agents that were successfully updated.
      <Expandable title="item properties">
        <ResponseField name="agent_id" type="string">Genie ID.</ResponseField>
        <ResponseField name="elevenlabs_id" type="string">ElevenLabs agent ID.</ResponseField>
        <ResponseField name="updated" type="boolean">Whether the agent was updated.</ResponseField>
      </Expandable>
    </ResponseField>
    <ResponseField name="failed_agents" type="array">
      Agents that failed to update.
    </ResponseField>
    <ResponseField name="total_agents" type="number">
      Total number of dependent agents processed.
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```typescript ApiService.invoke()
const response = await ApiService.invoke(
  "documents",
  "sync-with-agent",
  undefined,
  {
    oldDocId: "el-doc-abc123def456",
    newDocId: "el-doc-xyz789uvw012",
    preventDeletion: false,
  }
);
```

```json Request body
{
  "resource": "documents",
  "action": "sync-with-agent",
  "data": {
    "oldDocId": "el-doc-abc123def456",
    "newDocId": "el-doc-xyz789uvw012",
    "preventDeletion": false
  }
}
```

```json Response
{
  "success": true,
  "data": {
    "synced_agents": [
      {
        "agent_id": "880e8400-e29b-41d4-a716-446655440003",
        "elevenlabs_id": "el-agent-456",
        "updated": true
      }
    ],
    "failed_agents": [],
    "total_agents": 1
  }
}
```
</CodeGroup>

---

## Error codes

| Code | Status | Description |
|------|--------|-------------|
| `UNAUTHORIZED` | 401 | Missing or invalid authentication token |
| `INVALID_TOKEN` | 401 | Token validation failed |
| `FORBIDDEN` | 403 | User lacks required permissions |
| `NOT_FOUND` | 404 | Document not found |
| `VALIDATION_ERROR` | 400 | Invalid request parameters |
| `INVALID_ACTION` | 400 | Unknown action for the documents resource |
| `INTERNAL_ERROR` | 500 | Server-side error |
